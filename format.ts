// unicodeFormatter.ts
// A simple Unicode text formatter (tags + style conversion).
/*
import { convertStyle, formatWithTags } from './format.ts';
const input = `This is <bold>bold</bold> <underline>and</underline> <italic>italic</italic>.`;
console.log(formatWithTags(input));
console.log(convertStyle('Hello 123', 'bold'));
*/

/**
 * Maps for Unicode styled alphabets and digits.
 * Based on Unicode Mathematical Alphanumeric Symbols block (U+1D400â€“U+1D7FF).  [oai_citation:1â€¡codepoints.net](https://codepoints.net/mathematical_alphanumeric_symbols?lang=en&utm_source=chatgpt.com)
 */
const styleMaps = {
  bold: {
    upper: [
      'ð€','ð','ð‚','ðƒ','ð„','ð…','ð†','ð‡','ðˆ','ð‰','ðŠ','ð‹','ðŒ',
      'ð','ðŽ','ð','ð','ð‘','ð’','ð“','ð”','ð•','ð–','ð—','ð˜','ð™'
    ],
    lower: [
      'ðš','ð›','ðœ','ð','ðž','ðŸ','ð ','ð¡','ð¢','ð£','ð¤','ð¥','ð¦',
      'ð§','ð¨','ð©','ðª','ð«','ð¬','ð­','ð®','ð¯','ð°','ð±','ð²','ð³'
    ],
    digits: ['ðŸŽ','ðŸ','ðŸ','ðŸ‘','ðŸ’','ðŸ“','ðŸ”','ðŸ•','ðŸ–','ðŸ—'],
  },

  italic: {
    upper: [
      'ð‘¨','ð‘©','ð‘ª','ð‘«','ð‘¬','ð‘­','ð‘®','ð‘¯','ð‘°','ð‘±','ð‘²','ð‘³','ð‘´',
      'ð‘µ','ð‘¶','ð‘·','ð‘¸','ð‘¹','ð‘º','ð‘»','ð‘¼','ð‘½','ð‘¾','ð‘¿','ð’€','ð’'
    ],
    lower: [
      'ð’‚','ð’ƒ','ð’„','ð’…','ð’†','ð’‡','ð’ˆ','ð’‰','ð’Š','ð’‹','ð’Œ','ð’','ð’Ž',
      'ð’','ð’','ð’‘','ð’’','ð’“','ð’”','ð’•','ð’–','ð’—','ð’˜','ð’™','ð’š','ð’›'
    ],
  },

  script: {
    upper: [
      'ð’œ','â„¬','ð’ž','ð’Ÿ','â„°','â„±','ð’¢','â„‹','â„','ð’¥','ð’¦','â„’','â„³',
      'ð’©','ð’ª','ð’«','ð’¬','â„›','ð’®','ð’¯','ð’°','ð’±','ð’²','ð’³','ð’´','ð’µ'
    ],
    lower: [
      'ð’¶','ð’·','ð’¸','ð’¹','â„¯','ð’»','ð‘”','ð’½','ð’¾','ð’¿','ð“€','ð“','ð“‚',
      'ð“ƒ','ð‘œ','ð“…','ð“†','ð“‡','ð“ˆ','ð“‰','ð“Š','ð“‹','ð“Œ','ð“','ð“Ž','ð“'
    ],
  },

  doublestruck: {
    upper: [
      'ð”¸','ð”¹','â„‚','ð”»','ð”¼','ð”½','ð”¾','â„','ð•€','ð•','ð•‚','ð•ƒ','ð•„',
      'â„•','ð•†','â„™','â„š','â„','ð•Š','ð•‹','ð•Œ','ð•','ð•Ž','ð•','ð•','â„¤'
    ],
    lower: [
      'ð•’','ð•“','ð•”','ð••','ð•–','ð•—','ð•˜','ð•™','ð•š','ð•›','ð•œ','ð•','ð•ž',
      'ð•Ÿ','ð• ','ð•¡','ð•¢','ð•£','ð•¤','ð•¥','ð•¦','ð•§','ð•¨','ð•©','ð•ª','ð•«'
    ],
    digits: ['ðŸ˜','ðŸ™','ðŸš','ðŸ›','ðŸœ','ðŸ','ðŸž','ðŸŸ','ðŸ ','ðŸ¡'],
  },

  underline: {
    upper: Array.from('ABCDEFGHIJKLMNOPQRSTUVWXYZ').map(c => c + '\u0332'),
    lower: Array.from('abcdefghijklmnopqrstuvwxyz').map(c => c + '\u0332'),
    digits: Array.from('0123456789').map(d => d + '\u0332'),
  },

  strikethrough: {
    upper: Array.from('ABCDEFGHIJKLMNOPQRSTUVWXYZ').map(c => c + '\u0335'),
    lower: Array.from('abcdefghijklmnopqrstuvwxyz').map(c => c + '\u0335'),
    digits: Array.from('0123456789').map(d => d + '\u0335'),
  },

  fraktur: {
    upper: [
      'ð”„','ð”…','ð”†','ð”‡','ð”ˆ','ð”‰','ð”Š','ð”‰','ð”‰','ð”','ð”Ž','ð”','ð”',
      'ð”‘','ð”’','ð”“','ð””','ð”ž','ð”–','ð”—','ð”˜','ð”™','ð”š','ð”›','ð”œ','ð”·'
    ],
    lower: [
      'ð”ž','ð”Ÿ','ð” ','ð”¡','ð”¢','ð”£','ð”¤','ð”¥','ð”¦','ð”§','ð”¨','ð”©','ð”ª',
      'ð”«','ð”¬','ð”­','ð”®','ð”¯','ð”°','ð”±','ð”²','ð”³','ð”´','ð”µ','ð”¶','ð”·'
    ],
  },

  bolditalic: {
    upper: [
      'ð‘¨','ð‘©','ð‘ª','ð‘«','ð‘¬','ð‘­','ð‘®','ð‘¯','ð‘°','ð‘±','ð‘²','ð‘³','ð‘´',
      'ð‘µ','ð‘¶','ð‘·','ð‘¸','ð‘¹','ð‘º','ð‘»','ð‘¼','ð‘½','ð‘¾','ð‘¿','ð’€','ð’'
    ],
    lower: [
      'ð’‚','ð’ƒ','ð’„','ð’…','ð’†','ð’‡','ð’ˆ','ð’‰','ð’Š','ð’‹','ð’Œ','ð’','ð’Ž',
      'ð’','ð’','ð’‘','ð’’','ð’“','ð’”','ð’•','ð’–','ð’—','ð’˜','ð’™','ð’š','ð’›'
    ],
  },

  sansserif: {
    upper: [
      'ð– ','ð–¡','ð–¢','ð–£','ð–¤','ð–¥','ð–¦','ð–§','ð–¨','ð–©','ð–ª','ð–«','ð–¬',
      'ð–­','ð–®','ð–¯','ð–°','ð–±','ð–²','ð–³','ð–´','ð–µ','ð–¶','ð–·','ð–¸','ð–¹'
    ],
    lower: [
      'ð–†','ð–‡','ð–ˆ','ð–‰','ð–Š','ð–‹','ð–Œ','ð–','ð–Ž','ð–','ð–','ð–‘','ð–’',
      'ð–“','ð–”','ð–•','ð––','ð–—','ð–˜','ð–™','ð–š','ð–›','ð–œ','ð–','ð–ž','ð–Ÿ'
    ],
    digits: ['ðŸ¢','ðŸ£','ðŸ¤','ðŸ¥','ðŸ¦','ðŸ§','ðŸ¨','ðŸ©','ðŸª','ðŸ«'],
  },

  sansserifitalic: {
    upper: [
      'ð˜ˆ','ð˜‰','ð˜Š','ð˜‹','ð˜Œ','ð˜','ð˜Ž','ð˜','ð˜','ð˜‘','ð˜’','ð˜“','ð˜”',
      'ð˜•','ð˜–','ð˜—','ð˜˜','ð˜™','ð˜š','ð˜›','ð˜œ','ð˜','ð˜ž','ð˜Ÿ','ð˜ ','ð˜¡'
    ],
    lower: [
      'ð˜¢','ð˜£','ð˜¤','ð˜¥','ð˜¦','ð˜§','ð˜¨','ð˜©','ð˜ª','ð˜«','ð˜¬','ð˜­','ð˜®',
      'ð˜¯','ð˜°','ð˜±','ð˜²','ð˜³','ð˜´','ð˜µ','ð˜¶','ð˜·','ð˜¸','ð˜¹','ð˜º','ð˜»'
    ],
  },

  monospace: {
    upper: [
      'ð™°','ð™±','ð™²','ð™³','ð™´','ð™µ','ð™¶','ð™·','ð™¸','ð™¹','ð™º','ð™»','ð™¼',
      'ð™½','ð™¾','ð™¿','ðš€','ðš','ðš‚','ðšƒ','ðš„','ðš…','ðš†','ðš‡','ðšˆ','ðš‰'
    ],
    lower: [
      'ðšŠ','ðš‹','ðšŒ','ðš','ðšŽ','ðš','ðš','ðš‘','ðš’','ðš“','ðš”','ðš•','ðš–',
      'ðš—','ðš˜','ðš™','ðšš','ðš›','ðšœ','ðš','ðšž','ðšŸ','ðš ','ðš¡','ðš¢','ðš£'
    ],
    digits: ['ðŸ¶','ðŸ·','ðŸ¸','ðŸ¹','ðŸº','ðŸ»','ðŸ¼','ðŸ½','ðŸ¾','ðŸ¿'],
  },

  boldscript: {
    upper: [
      'ð“','ð“‘','ð“’','ð““','ð“”','ð“•','ð“–','ð“—','ð“˜','ð“™','ð“š','ð“›','ð“œ',
      'ð“','ð“ž','ð“Ÿ','ð“ ','ð“¡','ð“¢','ð“£','ð“¤','ð“¥','ð“¦','ð“§','ð“¨','ð“©'
    ],
    lower: [
      'ð“ª','ð“«','ð“¬','ð“­','ð“®','ð“¯','ð“°','ð“±','ð“²','ð“³','ð“´','ð“µ','ð“¶',
      'ð“·','ð“¸','ð“¹','ð“º','ð“»','ð“¼','ð“½','ð“¾','ð“¿','ð”€','ð”','ð”‚','ð”ƒ'
    ],
  },

  boldfraktur: {
    upper: [
      'ð–†','ð–‡','ð–ˆ','ð–‰','ð–Š','ð–‹','ð–Œ','ð–','ð–Ž','ð–','ð–','ð–‘','ð–’',
      'ð–“','ð–”','ð–•','ð––','ð–—','ð–˜','ð–˜','ð–š','ð–›','ð–œ','ð–','ð–ž','ð–Ÿ'
    ],
    lower: [
      'ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž',
      'ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž','ð–Ž'
    ],
  },

  sansseribbold: {
    upper: [
      'ð– ','ð–¡','ð–¢','ð–£','ð–¤','ð–¥','ð–¦','ð–§','ð–¨','ð–©','ð–ª','ð–«','ð–¬',
      'ð–­','ð–®','ð–¯','ð–°','ð–±','ð–²','ð–³','ð–´','ð–µ','ð–¶','ð–·','ð–¸','ð–¹'
    ],
    lower: [
      'ð–†','ð–‡','ð–ˆ','ð–‰','ð–Š','ð–‹','ð–Œ','ð–','ð–Ž','ð–','ð–','ð–‘','ð–’',
      'ð–“','ð–”','ð–•','ð––','ð–—','ð–˜','ð–™','ð–š','ð–›','ð–œ','ð–','ð–ž','ð–Ÿ'
    ],
    digits: ['ðŸ¢','ðŸ£','ðŸ¤','ðŸ¥','ðŸ¦','ðŸ§','ðŸ¨','ðŸ©','ðŸª','ðŸ«'],
  },

  sansserifbolditalic: {
    upper: [
      'ð˜¼','ð˜½','ð˜¾','ð˜¿','ð™€','ð™','ð™‚','ð™ƒ','ð™„','ð™…','ð™†','ð™‡','ð™ˆ',
      'ð™‰','ð™Š','ð™‹','ð™Œ','ð™','ð™Ž','ð™','ð™','ð™‘','ð™’','ð™“','ð™”','ð™•'
    ],
    lower: [
      'ð™–','ð™—','ð™˜','ð™™','ð™š','ð™›','ð™œ','ð™','ð™ž','ð™Ÿ','ð™ ','ð™¡','ð™¢',
      'ð™£','ð™¤','ð™¥','ð™¦','ð™§','ð™¨','ð™©','ð™ª','ð™«','ð™¬','ð™­','ð™®','ð™¯'
    ],
  },

  openface: {
    upper: [
      'ð”¸','ð”¹','â„‚','ð”»','ð”¼','ð”½','ð”¾','â„','ð•€','ð•','ð•‚','ð•ƒ','ð•„',
      'â„•','ð•†','â„™','â„š','â„','ð•Š','ð•‹','ð•Œ','ð•','ð•Ž','ð•','ð•','â„¤'
    ],
    lower: [
      'ð•’','ð•“','ð•”','ð••','ð•–','ð•—','ð•˜','ð•™','ð•š','ð•›','ð•œ','ð•','ð•ž',
      'ð•Ÿ','ð• ','ð•¡','ð•¢','ð•£','ð•¤','ð•¥','ð•¦','ð•§','ð•¨','ð•©','ð•ª','ð•«'
    ],
  },

  smallcaps: {
    upper: [
      'A','B','C','D','E','F','G','H','I','J','K','L','M',
      'N','O','P','Q','R','S','T','U','V','W','X','Y','Z'
    ],
    lower: [
      'á´€','Ê™','á´„','á´…','á´‡','Ò“','É¢','Êœ','Éª','á´Š','á´‹','ÊŸ','á´',
      'É´','á´','á´˜','Ç«','Ê€','s','á´›','á´œ','á´ ','á´¡','x','Ê','á´¢'
    ],
  },

} as const;

type StyleKey = keyof typeof styleMaps;

/**
 * Maps a single character to its styled equivalent (if available).
 */
function mapChar(char: string, style: StyleKey): string {
  const map = styleMaps[style];
  const code = char.charCodeAt(0);

  if (code >= 65 && code <= 90 && map.upper) {
    return map.upper[code - 65];
  }
  if (code >= 97 && code <= 122 && map.lower) {
    return map.lower[code - 97];
  }
  if (code >= 48 && code <= 57 && map.digits) {
    return map.digits[code - 48]!;
  }
  return char;
}

/**
 * Convert an entire string to a single styleâ€™s Unicode equivalents.
 */
export function convertStyle(text: string, style: StyleKey): string {
  return text.split('').map((ch) => mapChar(ch, style)).join('');
}

/**
 * Parse XML-like tags and replace them with styled text.
 * Example: "Hello <bold>World</bold>!".
 */
export function formatWithTags(input: string): string {
  return input.replace(
    /<([a-z]+)>([\s\S]*?)<\/\1>/gi,
    (_, tag: string, content: string) => {
      const style = tag as StyleKey;
      if (!styleMaps[style]) return content; // unknown tag â†’ no change
      return convertStyle(content, style);
    }
  );
}
